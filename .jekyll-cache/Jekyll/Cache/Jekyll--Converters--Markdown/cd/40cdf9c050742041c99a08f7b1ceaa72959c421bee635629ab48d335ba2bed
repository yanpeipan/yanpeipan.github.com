I"
<hr />

<h1 id="php-æ˜¯ä»€ä¹ˆ">PHP æ˜¯ä»€ä¹ˆï¼Ÿ</h1>
<p>PHPåŸå§‹ä¸º<code>Personal Home Page</code>çš„ç¼©å†™,å·²ç»æ­£å¼æ›´åä¸º <code>PHP: Hypertext Preprocessor</code>ï¼ˆè¶…æ–‡æœ¬é¢„å¤„ç†å™¨çš„å­—æ¯ç¼©å†™ï¼‰
PHPæ˜¯ä¸€ç§è¢«å¹¿æ³›åº”ç”¨çš„å¼€æ”¾æºä»£ç çš„å¤šç”¨é€”è„šæœ¬è¯­è¨€ï¼Œå®ƒå¯åµŒå…¥åˆ° HTMLä¸­ï¼Œå°¤å…¶é€‚åˆ web å¼€å‘ã€‚
PHP è„šæœ¬ä¸»è¦ç”¨äºä»¥ä¸‹ä¸‰ä¸ªé¢†åŸŸï¼šæœåŠ¡ç«¯è„šæœ¬ï¼Œå‘½ä»¤è¡Œè„šæœ¬ï¼Œç¼–å†™æ¡Œé¢åº”ç”¨ç¨‹åº</p>

<hr />

<h1 id="è¯­è¨€å‚è€ƒ"><strong>è¯­è¨€å‚è€ƒ</strong></h1>

<h2 id="æ•°æ®ç±»å‹">æ•°æ®ç±»å‹</h2>
<p>å››ç§æ ‡é‡ç±»å‹ï¼š<code>string</code> <code>integer</code> <code>float</code> <code>boolean</code>
ä¸¤ç§å¤åˆç±»å‹ï¼š<code>array</code> <code>object</code>
ä¸¤ç§ç‰¹æ®Šç±»å‹ï¼š<code>resource</code> <code>NULL</code>
å›è°ƒç±»å‹: <code>callback</code></p>

<h3 id="æ•°æ®ç±»å‹è½¬æ¢">æ•°æ®ç±»å‹è½¬æ¢</h3>
<ol>
  <li><strong>è‡ªåŠ¨ç±»å‹è½¬æ¢</strong>
PHP åœ¨å˜é‡å®šä¹‰ä¸­ä¸éœ€è¦ï¼ˆæˆ–ä¸æ”¯æŒï¼‰æ˜ç¡®çš„ç±»å‹å®šä¹‰ï¼›å˜é‡ç±»å‹æ˜¯æ ¹æ®ä½¿ç”¨è¯¥å˜é‡çš„ä¸Šä¸‹æ–‡æ‰€å†³å®šçš„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœæŠŠä¸€ä¸ª <code>string</code> å€¼èµ‹ç»™å˜é‡ <code>$var</code>ï¼Œ<code>$var</code> å°±æˆäº†ä¸€ä¸ª <code>string</code>ã€‚å¦‚æœåˆæŠŠä¸€ä¸ª<code>integer</code> èµ‹ç»™ <code>$var</code>ï¼Œé‚£å®ƒå°±æˆäº†ä¸€ä¸ª<code>integer</code>ã€‚
PHP çš„è‡ªåŠ¨ç±»å‹è½¬æ¢çš„ä¸€ä¸ªä¾‹å­æ˜¯åŠ æ³•è¿ç®—ç¬¦<code>+</code>ã€‚å¦‚æœä»»ä½•ä¸€ä¸ªæ“ä½œæ•°æ˜¯<code>float</code>ï¼Œåˆ™æ‰€æœ‰çš„æ“ä½œæ•°éƒ½è¢«å½“æˆ<code>float</code>ï¼Œç»“æœä¹Ÿæ˜¯<code>float</code>ã€‚å¦åˆ™æ“ä½œæ•°ä¼šè¢«è§£é‡Šä¸º<code>integer</code>ï¼Œç»“æœä¹Ÿæ˜¯<code>integer</code>ã€‚æ³¨æ„è¿™å¹¶æ²¡æœ‰æ”¹å˜è¿™äº›æ“ä½œæ•°æœ¬èº«çš„ç±»å‹ï¼›æ”¹å˜çš„ä»…æ˜¯è¿™äº›æ“ä½œæ•°å¦‚ä½•è¢«æ±‚å€¼ä»¥åŠè¡¨è¾¾å¼æœ¬èº«çš„ç±»å‹ã€‚</li>
  <li><strong>å¼ºåˆ¶ç±»å‹è½¬æ¢</strong>
    <ul>
      <li><code>(int)</code> <code>(integer)</code> - è½¬æ¢ä¸ºæ•´å½¢ <code>integer</code></li>
      <li><code>(bool)</code> <code>(boolean)</code> - è½¬æ¢ä¸ºå¸ƒå°”ç±»å‹ <code>boolean</code></li>
      <li><code>(float)</code> <code>(double)</code> <code>(real)</code> - è½¬æ¢ä¸ºæµ®ç‚¹å‹ <code>float</code></li>
      <li><code>(string)</code> - è½¬æ¢ä¸ºå­—ç¬¦ä¸² <code>string</code></li>
      <li><code>(array)</code> - è½¬æ¢ä¸ºæ•°ç»„ <code>array</code></li>
      <li><code>(object)</code> - è½¬æ¢ä¸ºå¯¹è±¡ <code>object</code></li>
      <li><code>(unset)</code> - è½¬æ¢ä¸º <code>NULL</code> (PHP 5)</li>
      <li><code>(binary)</code> <code>b"string"</code> - æ¢ä¸ºäºŒè¿›åˆ¶å­—ç¬¦ä¸²</li>
    </ul>
  </li>
</ol>

<h2 id="é­”æœ¯å¸¸é‡">é­”æœ¯å¸¸é‡</h2>
<p><code>__LINE__</code>   æ–‡ä»¶ä¸­çš„å½“å‰è¡Œå·ã€‚
<code>__FILE__</code>   æ–‡ä»¶çš„å®Œæ•´è·¯å¾„å’Œæ–‡ä»¶åã€‚å¦‚æœç”¨åœ¨è¢«åŒ…å«æ–‡ä»¶ä¸­ï¼Œåˆ™è¿”å›è¢«åŒ…å«çš„æ–‡ä»¶åã€‚è‡ª PHP 4.0.2 èµ·ï¼Œ<code>__FILE__</code> æ€»æ˜¯åŒ…å«ä¸€ä¸ªç»å¯¹è·¯å¾„ï¼ˆå¦‚æœæ˜¯ç¬¦å·è¿æ¥ï¼Œåˆ™æ˜¯è§£æåçš„ç»å¯¹è·¯å¾„ï¼‰ï¼Œè€Œåœ¨æ­¤ä¹‹å‰çš„ç‰ˆæœ¬æœ‰æ—¶ä¼šåŒ…å«ä¸€ä¸ªç›¸å¯¹è·¯å¾„ã€‚
<code>__DIR__</code>  æ–‡ä»¶æ‰€åœ¨çš„ç›®å½•ã€‚å¦‚æœç”¨åœ¨è¢«åŒ…æ‹¬æ–‡ä»¶ä¸­ï¼Œåˆ™è¿”å›è¢«åŒ…æ‹¬çš„æ–‡ä»¶æ‰€åœ¨çš„ç›®å½•ã€‚å®ƒç­‰ä»·äº <code>dirname(__FILE__)</code>ã€‚é™¤éæ˜¯æ ¹ç›®å½•ï¼Œå¦åˆ™ç›®å½•ä¸­åä¸åŒ…æ‹¬æœ«å°¾çš„æ–œæ ã€‚ï¼ˆPHP 5.3.0ä¸­æ–°å¢ï¼‰
<code>__FUNCTION__</code>   å‡½æ•°åç§°ï¼ˆPHP 4.3.0 æ–°åŠ ï¼‰ã€‚è‡ª PHP 5 èµ·æœ¬å¸¸é‡è¿”å›è¯¥å‡½æ•°è¢«å®šä¹‰æ—¶çš„åå­—ï¼ˆåŒºåˆ†å¤§å°å†™ï¼‰ã€‚åœ¨ PHP 4 ä¸­è¯¥å€¼æ€»æ˜¯å°å†™å­—æ¯çš„ã€‚
<code>__CLASS__</code>  ç±»çš„åç§°ï¼ˆPHP 4.3.0 æ–°åŠ ï¼‰ã€‚è‡ª PHP 5 èµ·æœ¬å¸¸é‡è¿”å›è¯¥ç±»è¢«å®šä¹‰æ—¶çš„åå­—ï¼ˆåŒºåˆ†å¤§å°å†™ï¼‰ã€‚åœ¨ PHP 4 ä¸­è¯¥å€¼æ€»æ˜¯å°å†™å­—æ¯çš„ã€‚ç±»ååŒ…æ‹¬å…¶è¢«å£°æ˜çš„ä½œç”¨åŒºåŸŸï¼ˆä¾‹å¦‚ <code>Foo\Bar</code>ï¼‰ã€‚æ³¨æ„è‡ª PHP 5.4 èµ· <code>__CLASS__</code> å¯¹ trait ä¹Ÿèµ·ä½œç”¨ã€‚å½“ç”¨åœ¨ trait æ–¹æ³•ä¸­æ—¶ï¼Œ<code>__CLASS__</code> æ˜¯è°ƒç”¨ trait æ–¹æ³•çš„ç±»çš„åå­—ã€‚
<code>__TRAIT__</code>  Trait çš„åå­—ï¼ˆPHP 5.4.0 æ–°åŠ ï¼‰ã€‚è‡ª PHP 5.4 èµ·æ­¤å¸¸é‡è¿”å› trait è¢«å®šä¹‰æ—¶çš„åå­—ï¼ˆåŒºåˆ†å¤§å°å†™ï¼‰ã€‚Trait ååŒ…æ‹¬å…¶è¢«å£°æ˜çš„ä½œç”¨åŒºåŸŸï¼ˆä¾‹å¦‚ <code>Foo\Bar</code>ï¼‰ã€‚
<code>__METHOD__</code>   ç±»çš„æ–¹æ³•åï¼ˆPHP 5.0.0 æ–°åŠ ï¼‰ã€‚è¿”å›è¯¥æ–¹æ³•è¢«å®šä¹‰æ—¶çš„åå­—ï¼ˆåŒºåˆ†å¤§å°å†™ï¼‰ã€‚
<code>__NAMESPACE__</code>  å½“å‰å‘½åç©ºé—´çš„åç§°ï¼ˆåŒºåˆ†å¤§å°å†™ï¼‰ã€‚æ­¤å¸¸é‡æ˜¯åœ¨ç¼–è¯‘æ—¶å®šä¹‰çš„ï¼ˆPHP 5.3.0 æ–°å¢ï¼‰ã€‚</p>

<hr />

<h2 id="é­”æœ¯æ–¹æ³•">é­”æœ¯æ–¹æ³•</h2>
<p><code>__construct()</code>
<code>__destruct()</code>
<code>__call()</code>
<code>__callStatic()</code>
<code>__get()</code>
<code>__set()</code>
<code>__isset()</code>
<code>__unset()</code>
<code>__sleep()</code>
<code>__wakeup()</code>
<code>__toString()</code>
<code>__invoke()</code>
<code>__set_state()</code>
<code>__clone()</code></p>

<h2 id="å…¨å±€ç¯å¢ƒå˜é‡">å…¨å±€ç¯å¢ƒå˜é‡</h2>
<p><code>è¶…å…¨å±€å˜é‡</code> â€” è¶…å…¨å±€å˜é‡æ˜¯åœ¨å…¨éƒ¨ä½œç”¨åŸŸä¸­å§‹ç»ˆå¯ç”¨çš„å†…ç½®å˜é‡
<code>$GLOBALS</code> â€” å¼•ç”¨å…¨å±€ä½œç”¨åŸŸä¸­å¯ç”¨çš„å…¨éƒ¨å˜é‡
<code>$_SERVER</code> â€” æœåŠ¡å™¨å’Œæ‰§è¡Œç¯å¢ƒä¿¡æ¯
<code>$_GET</code> â€” HTTP GET å˜é‡
<code>$_POST</code> â€” HTTP POST å˜é‡
<code>$_FILES</code> â€” HTTP æ–‡ä»¶ä¸Šä¼ å˜é‡
<code>$_REQUEST</code> â€” HTTP Request å˜é‡
<code>$_SESSION</code> â€” Session å˜é‡
<code>$_ENV</code> â€” ç¯å¢ƒå˜é‡
<code>$_COOKIE</code> â€” HTTP Cookies
<code>$php_errormsg</code> â€” å‰ä¸€ä¸ªé”™è¯¯ä¿¡æ¯
<code>$HTTP_RAW_POST_DATA</code> â€” åŸç”ŸPOSTæ•°æ®
<code>$http_response_header</code> â€” HTTP å“åº”å¤´
<code>$argc</code> â€” ä¼ é€’ç»™è„šæœ¬çš„å‚æ•°æ•°ç›®
<code>$argv</code> â€” ä¼ é€’ç»™è„šæœ¬çš„å‚æ•°æ•°ç»„</p>

<h2 id="è¡¨è¾¾å¼">è¡¨è¾¾å¼</h2>

<pre><code>gettype( PHP_INT_MAX + 1 );
function_exists('print');
(int) ( ( 0.1 + 0.7) * 10 );
is_nan( acos( 8 ) );
( bool )'0';
false || true;
array( 1 =&gt; "a", "1"  =&gt; "b", 1.5  =&gt; "c", true =&gt; "d" );
array( "a", "b", 6 =&gt; "c", "d" );
count( 'string' );
count( null );
$null = null; isset( $null );
$object = (object) 'string'; $object-&gt;scalar;
8 % ( -2 );
$srcArr = array( 'a', 'b', 'c', 'd' ); is_string( array_rand( $srcArr ) );
$a = 1; function sum(){ echo $a;} sum();
</code></pre>

<p><a href="http://cn2.php.net/manual/zh/function.count.php#refsect1-function.count-returnvalues">count è¿”å›å€¼ Â¶</a>
<a href="http://www.php.net/manual/zh/function.isset.php#refsect1-function.isset-description">isset è¯´æ˜ Â¶</a>
<a href="http://www.php.net/manual/zh/language.types.object.php#language.types.object.casting">è½¬æ¢ä¸ºå¯¹è±¡ Â¶</a>
ä½ å¯èƒ½æ³¨æ„åˆ° PHP çš„å…¨å±€å˜é‡å’Œ C è¯­è¨€æœ‰ä¸€ç‚¹ç‚¹ä¸åŒï¼Œåœ¨ C è¯­è¨€ä¸­ï¼Œå…¨å±€å˜é‡åœ¨å‡½æ•°ä¸­è‡ªåŠ¨ç”Ÿæ•ˆï¼Œé™¤éè¢«å±€éƒ¨å˜é‡è¦†ç›–ã€‚è¿™å¯èƒ½å¼•èµ·ä¸€äº›é—®é¢˜ï¼Œæœ‰äº›äººå¯èƒ½ä¸å°å¿ƒå°±æ”¹å˜äº†ä¸€ä¸ªå…¨å±€å˜é‡ã€‚PHP ä¸­å…¨å±€å˜é‡åœ¨å‡½æ•°ä¸­ä½¿ç”¨æ—¶å¿…é¡»å£°æ˜ä¸º globalã€‚
<a href="http://php.net/manual/zh/language.variables.scope.php">å˜é‡èŒƒå›´ Â¶</a></p>

<hr />

<h4 id="ä¸å€ŸåŠ©é¢å¤–å˜é‡äº¤æ¢ä¸¤ä¸ªå˜é‡çš„å€¼">ä¸å€ŸåŠ©é¢å¤–å˜é‡ï¼Œäº¤æ¢ä¸¤ä¸ªå˜é‡çš„å€¼</h4>
<pre><code>$a = $a - $b;
$b = $b + $a;
$a = $b - $a;   /* ä¼˜ç‚¹ï¼šè¿ç®—ç®€å• ï¼›ç¼ºç‚¹ï¼šåªæ”¯æŒæ•´å½¢ï¼Œå­˜åœ¨æº¢å‡ºé—®é¢˜ï¼ˆç²¾åº¦ä¸¢å¤±ï¼‰ */

$a = $a ^ $b;
$b = $b ^ $a;
$a = $a ^ $b;  /* ä¼˜ç‚¹ï¼šè¿ç®—ç®€å• ï¼Œä¸çº¯åœ¨æº¢å‡ºé—®é¢˜ï¼›ç¼ºç‚¹ï¼šå­—ç¬¦ä¸²é•¿åº¦ç›¸åŒæ—¶æ‰èƒ½æ­£ç¡®äº¤æ¢ï¼Œè‹¥æ˜¯ä¸¤ä¸ªæ•°å€¼ç›¸åŒçš„æ•° å°±ä¸èƒ½äº¤æ¢ */

$a .= $b;
$b = substr($a, 0, ( strlen($a) - strlen($b) ) );
$a = substr($a, strlen($b) );   /* ä¼˜ç‚¹ï¼šæ”¯æŒå­—ç¬¦ä¸²å’Œæ•´å½¢ï¼Œä»¥åŠæ ¼å¼åŒ–çš„æ•°ç»„ï¼Œå¯¹è±¡ç­‰ï¼Œä¸å­˜åœ¨æº¢å‡ºé—®é¢˜ */

$a .= $b;
$b = str_replace( $b, "", $a );
$a = str_replace( $b, "", $a );  /* å­—ç¬¦ä¸²æ”¹è¿›ç‰ˆ */

list($var1, $var2) = array($var2, $var1);  /* ä¼˜ç‚¹ï¼šé€šç”¨ */
</code></pre>
<h4 id="ç”¨æœ€å°‘çš„ä»£ç å†™3å€¼æœ€å¤§å€¼çš„å‡½æ•°">ç”¨æœ€å°‘çš„ä»£ç å†™3å€¼æœ€å¤§å€¼çš„å‡½æ•°</h4>
<pre><code>function () {
  return max(func_get_args());
};
</code></pre>
<h4 id="echoprintprint_rçš„åŒºåˆ«">echo,print,print_rçš„åŒºåˆ«</h4>
<ul>
  <li>void echo ( string $arg1 [, string $â€¦ ] )</li>
</ul>

<p>echo ä¸æ˜¯ä¸€ä¸ªå‡½æ•°ï¼ˆå®ƒæ˜¯ä¸€ä¸ªè¯­è¨€ç»“æ„ï¼‰ï¼Œ å› æ­¤ä½ ä¸ä¸€å®šè¦ä½¿ç”¨å°æ‹¬å·æ¥æŒ‡æ˜å‚æ•°ï¼Œå•å¼•å·ï¼ŒåŒå¼•å·éƒ½å¯ä»¥ã€‚ echo ï¼ˆä¸åƒå…¶ä»–è¯­è¨€æ„é€ ï¼‰ä¸è¡¨ç°å¾—åƒä¸€ä¸ªå‡½æ•°ï¼Œ æ‰€ä»¥ä¸èƒ½æ€»æ˜¯ä½¿ç”¨ä¸€ä¸ªå‡½æ•°çš„ä¸Šä¸‹æ–‡ã€‚ å¦å¤–ï¼Œå¦‚æœä½ æƒ³ç»™echo ä¼ é€’å¤šä¸ªå‚æ•°ï¼Œ é‚£ä¹ˆå°±ä¸èƒ½ä½¿ç”¨å°æ‹¬å·ã€‚
æ²¡æœ‰è¿”å›å€¼ã€‚</p>
<ul>
  <li>int print ( string $arg )</li>
</ul>

<p>print å®é™…ä¸Šä¸æ˜¯ä¸€ä¸ªå‡½æ•°ï¼ˆå®ƒæ˜¯ä¸€ä¸ªè¯­è¨€ç»“æ„ï¼‰ï¼Œå› æ­¤ä½ å¯ä»¥ä¸å¿…ä½¿ç”¨åœ†æ‹¬å·æ¥æ‹¬èµ·å®ƒçš„å‚æ•°åˆ—è¡¨ã€‚æ€»æ˜¯è¿”å› 1ã€‚</p>
<ul>
  <li>bool print_r ( mixed $expression [, bool $return ] )</li>
</ul>

<p>print_r() æ˜¾ç¤ºå…³äºä¸€ä¸ªå˜é‡çš„æ˜“äºç†è§£çš„ä¿¡æ¯ã€‚å¦‚æœç»™å‡ºçš„æ˜¯ stringã€integer æˆ– floatï¼Œå°†æ‰“å°å˜é‡å€¼æœ¬èº«ã€‚å¦‚æœç»™å‡ºçš„æ˜¯ arrayï¼Œå°†ä¼šæŒ‰ç…§ä¸€å®šæ ¼å¼æ˜¾ç¤ºé”®å’Œå…ƒç´ ã€‚object ä¸æ•°ç»„ç±»ä¼¼ã€‚print_r() å°†æŠŠæ•°ç»„çš„æŒ‡é’ˆç§»åˆ°æœ€åè¾¹ã€‚ä½¿ç”¨ reset() å¯è®©æŒ‡é’ˆå›åˆ°å¼€å§‹å¤„ã€‚</p>
<pre><code>#è¯­è¨€ç»“æ„/å‡½æ•°,å‚æ•°,è¿”å›å€¼
echo $a, $b, PHP_EOL;
print $a . $b . PHP_EOL;
print_r(array($a,$b,PHP_EOL), true);
</code></pre>
<h4 id="å¦‚ä½•å®ç°å­—ç¬¦ä¸²ç¿»è½¬">å¦‚ä½•å®ç°å­—ç¬¦ä¸²ç¿»è½¬</h4>
<pre><code>strrev($s); // ä¸­æ–‡ä¹±ç 

preg_match_all('/./u', $s, $match);
implode('', array_reverse($match[0]));

$length = mb_strlen($s);
$r = '';
while($length) {
  $r .= mb_substr($s, --$length, 1, 'utf-8');
}
</code></pre>
<h4 id="ç¿»è½¬å­—ç¬¦ä¸²ä¸­çš„å•è¯å­—ç¬¦ä¸²ä»…åŒ…å«å¤§å°å†™å­—æ¯å’Œç©ºæ ¼å•è¯ä½¿ç”¨ç©ºæ ¼åˆ†å‰²å¦‚è¾“å…¥this-is-phpè¾“å‡ºphp-is-this">ç¿»è½¬å­—ç¬¦ä¸²ä¸­çš„å•è¯,å­—ç¬¦ä¸²ä»…åŒ…å«å¤§å°å†™å­—æ¯å’Œç©ºæ ¼,å•è¯ä½¿ç”¨ç©ºæ ¼åˆ†å‰².å¦‚:è¾“å…¥â€This is PHPâ€,è¾“å‡ºâ€PHP is Thisâ€</h4>
<pre><code>implode(' ', array_reverse(explode(' ', $s)));
</code></pre>
<h4 id="å°†1234567890è½¬æ¢æˆ1234567890æ¯3ä½ç”¨é€—å·éš”å¼€çš„å½¢å¼">å°†1234567890è½¬æ¢æˆ1,234,567,890æ¯3ä½ç”¨é€—å·éš”å¼€çš„å½¢å¼</h4>
<pre><code>strrev(implode(',', str_split(strrev($n), 3)));

number_format($n);

ltrim(strrev(chunk_split(strrev($n), 3, ',')), ',');

preg_replace('/(?&lt;=\d{3})(\d{3})/',', $1', preg_replace('/^(\d{1,3})((\d{3})+)$/','$1,$2',$n));
</code></pre>
<h4 id="php-çš„å‘½ä»¤è¡Œæ¨¡å¼-">PHP çš„å‘½ä»¤è¡Œæ¨¡å¼ Â¶</h4>
<p>ä»ç‰ˆæœ¬ 4.3.0 å¼€å§‹ï¼ŒPHP æä¾›äº†ä¸€ç§æ–°ç±»å‹çš„ CLI SAPIï¼ˆServer Application Programming Interfaceï¼ŒæœåŠ¡ç«¯åº”ç”¨ç¼–ç¨‹ç«¯å£ï¼‰æ”¯æŒï¼Œåä¸º CLIï¼Œæ„ä¸º Command Line Interfaceï¼Œå³å‘½ä»¤è¡Œæ¥å£ã€‚é¡¾åæ€ä¹‰ï¼Œè¯¥ CLI SAPI æ¨¡å—ä¸»è¦ç”¨ä½œ PHP çš„å¼€å‘å¤–å£³åº”ç”¨ã€‚CLI SAPI å’Œå…¶å®ƒ CLI SAPI æ¨¡å—ç›¸æ¯”æœ‰å¾ˆå¤šçš„ä¸åŒä¹‹å¤„ï¼Œæˆ‘ä»¬å°†åœ¨æœ¬ç« ä¸­è¯¦ç»†é˜è¿°ã€‚å€¼å¾—ä¸€æçš„æ˜¯ï¼ŒCLI å’Œ CGI æ˜¯ä¸åŒçš„ SAPIï¼Œå°½ç®¡å®ƒä»¬ä¹‹é—´æœ‰å¾ˆå¤šå…±åŒçš„è¡Œä¸ºã€‚</p>

<p>ä»¥ä¸‹ä¸º CLI SAPI å’Œå…¶å®ƒ CLI SAPI æ¨¡å—ç›¸æ¯”çš„æ˜¾è‘—åŒºåˆ«ï¼š</p>
<ul>
  <li>ä¸ CGI SAPI ä¸åŒï¼Œå…¶è¾“å‡ºæ²¡æœ‰ä»»ä½•å¤´ä¿¡æ¯ã€‚
å°½ç®¡ CGI SAPI æä¾›äº†å–æ¶ˆ HTTP å¤´ä¿¡æ¯çš„æ–¹æ³•ï¼Œä½†åœ¨ CLI SAPI ä¸­å¹¶ä¸å­˜åœ¨ç±»ä¼¼çš„æ–¹æ³•ä»¥å¼€å¯ HTTP å¤´ä¿¡æ¯çš„è¾“å‡ºã€‚
CLI é»˜è®¤ä»¥å®‰é™æ¨¡å¼å¼€å§‹ï¼Œä½†ä¸ºäº†ä¿è¯å…¼å®¹æ€§ï¼Œ-q å’Œ â€“no-header å‚æ•°ä¸ºäº†å‘åå…¼å®¹ä»ç„¶ä¿ç•™ï¼Œä½¿å¾—å¯ä»¥ä½¿ç”¨æ—§çš„ CGI è„šæœ¬ã€‚
åœ¨è¿è¡Œæ—¶ï¼Œä¸ä¼šæŠŠå·¥ä½œç›®å½•æ”¹ä¸ºè„šæœ¬çš„å½“å‰ç›®å½•ï¼ˆå¯ä»¥ä½¿ç”¨ -C å’Œ â€“no-chdir å‚æ•°æ¥å…¼å®¹ CGI æ¨¡å¼ï¼‰ã€‚
å‡ºé”™æ—¶è¾“å‡ºçº¯æ–‡æœ¬çš„é”™è¯¯ä¿¡æ¯ï¼ˆé HTML æ ¼å¼ï¼‰ã€‚</li>
  <li>CLI SAPI å¼ºåˆ¶è¦†ç›–äº† php.ini ä¸­çš„æŸäº›è®¾ç½®ï¼Œå› ä¸ºè¿™äº›è®¾ç½®åœ¨å¤–å£³ç¯å¢ƒä¸‹æ˜¯æ²¡æœ‰æ„ä¹‰çš„ã€‚</li>
  <li>ä¸ºäº†å‡è½»å¤–å£³ç¯å¢ƒä¸‹çš„å·¥ä½œï¼Œæˆ‘ä»¬å®šä¹‰äº†CLI ä¸“ç”¨å¸¸é‡ï¼šSTDIN, STDOUT, STDERR</li>
  <li>CLI SAPI ä¸ä¼šå°†å½“å‰ç›®å½•æ”¹ä¸ºå·²è¿è¡Œçš„è„šæœ¬æ‰€åœ¨çš„ç›®å½•ã€‚</li>
</ul>

<p>CLI SAPI æ¨¡å—æœ‰ä»¥ä¸‹ä¸‰ç§ä¸åŒçš„æ–¹æ³•æ¥è·å–è¦è¿è¡Œçš„ PHP ä»£ç ï¼š</p>
<ul>
  <li>è®© PHP è¿è¡ŒæŒ‡å®šæ–‡ä»¶ : php -f my_script.php</li>
  <li>åœ¨å‘½ä»¤è¡Œç›´æ¥è¿è¡Œ PHP ä»£ç  : php -r â€˜print_r(get_defined_constants());â€™</li>
  <li>
    <table>
      <tbody>
        <tr>
          <td>é€šè¿‡æ ‡å‡†è¾“å…¥ï¼ˆstdinï¼‰æä¾›éœ€è¦è¿è¡Œçš„ PHP ä»£ç  : some_application</td>
          <td>some_filter</td>
          <td>php</td>
          <td>sort -u &gt;final_output.txt</td>
        </tr>
      </tbody>
    </table>
  </li>
</ul>

<h4 id="è¯·å†™å‡ºå¹¶è¯´æ˜å¦‚ä½•åœ¨å‘½ä»¤è¡Œä¸‹è¿è¡Œphpè„šæœ¬å†™å‡ºä¸¤ç§æ–¹å¼åŒæ—¶å‘phpè„šæœ¬ä¼ é€’å‚æ•°">è¯·å†™å‡ºå¹¶è¯´æ˜å¦‚ä½•åœ¨å‘½ä»¤è¡Œä¸‹è¿è¡ŒPHPè„šæœ¬ï¼ˆå†™å‡ºä¸¤ç§æ–¹å¼ï¼‰åŒæ—¶å‘PHPè„šæœ¬ä¼ é€’å‚æ•°ï¼Ÿ</h4>
<pre><code>getopt('f:sed::', array('option::'));
!php % -f'/home/' -f ~ --option=\a\b\c

$argv;
!php % '/home'

fgets(STDIN);
</code></pre>
<h4 id="å†™5ä¸ªä¸åŒçš„è‡ªå·±å‡½æ•°æ¥è·å–ä¸€ä¸ªå…¨è·¯å¾„æ–‡ä»¶çš„æ‰©å±•å">å†™5ä¸ªä¸åŒçš„è‡ªå·±å‡½æ•°,æ¥è·å–ä¸€ä¸ªå…¨è·¯å¾„æ–‡ä»¶çš„æ‰©å±•å</h4>
<pre><code>function extension($filename) {
    $pathinfo = pathinfo($filename);
    return strtolower($pathinfo['extension']);
}
</code></pre>
<h4 id="è¯­å¥include-å’Œ-requireéƒ½èƒ½æŠŠå¦å¤–ä¸€ä¸ªæ–‡ä»¶åŒ…å«åˆ°å½“å‰æ–‡ä»¶ä¸­å®ƒä»¬çš„åŒºåˆ«æ˜¯ä¸ºäº†é¿å…å¤šæ¬¡åŒ…å«åŒä¸€æ–‡ä»¶å¯ä»¥ç”¨ä»€ä¹ˆè¯­å¥æ¥ä»£æ›¿å®ƒä»¬">è¯­å¥include å’Œ requireéƒ½èƒ½æŠŠå¦å¤–ä¸€ä¸ªæ–‡ä»¶åŒ…å«åˆ°å½“å‰æ–‡ä»¶ä¸­ï¼Œå®ƒä»¬çš„åŒºåˆ«æ˜¯?ä¸ºäº†é¿å…å¤šæ¬¡åŒ…å«åŒä¸€æ–‡ä»¶ï¼Œå¯ä»¥ç”¨ä»€ä¹ˆè¯­å¥æ¥ä»£æ›¿å®ƒä»¬?</h4>
<p>è¢«åŒ…å«æ–‡ä»¶å…ˆæŒ‰å‚æ•°ç»™å‡ºçš„è·¯å¾„å¯»æ‰¾ï¼Œå¦‚æœæ²¡æœ‰ç»™å‡ºç›®å½•ï¼ˆåªæœ‰æ–‡ä»¶åï¼‰æ—¶åˆ™æŒ‰ç…§ include_path æŒ‡å®šçš„ç›®å½•å¯»æ‰¾ã€‚å¦‚æœåœ¨ include_path ä¸‹æ²¡æ‰¾åˆ°è¯¥æ–‡ä»¶åˆ™ include æœ€åæ‰åœ¨è°ƒç”¨è„šæœ¬æ–‡ä»¶æ‰€åœ¨çš„ç›®å½•å’Œå½“å‰å·¥ä½œç›®å½•ä¸‹å¯»æ‰¾ã€‚å¦‚æœæœ€åä»æœªæ‰¾åˆ°æ–‡ä»¶åˆ™ include ç»“æ„ä¼šå‘å‡ºä¸€æ¡è­¦å‘Šï¼›è¿™ä¸€ç‚¹å’Œ require ä¸åŒï¼Œåè€…ä¼šå‘å‡ºä¸€ä¸ªè‡´å‘½é”™è¯¯ã€‚</p>

<p>å¦‚æœå®šä¹‰äº†è·¯å¾„â€”â€”ä¸ç®¡æ˜¯ç»å¯¹è·¯å¾„ï¼ˆåœ¨ Windows ä¸‹ä»¥ç›˜ç¬¦æˆ–è€… \ å¼€å¤´ï¼Œåœ¨ Unix/Linux ä¸‹ä»¥ / å¼€å¤´ï¼‰è¿˜æ˜¯å½“å‰ç›®å½•çš„ç›¸å¯¹è·¯å¾„ï¼ˆä»¥ . æˆ–è€… .. å¼€å¤´ï¼‰â€”â€”include_path éƒ½ä¼šè¢«å®Œå…¨å¿½ç•¥ã€‚ä¾‹å¦‚ä¸€ä¸ªæ–‡ä»¶ä»¥ ../ å¼€å¤´ï¼Œåˆ™è§£æå™¨ä¼šåœ¨å½“å‰ç›®å½•çš„çˆ¶ç›®å½•ä¸‹å¯»æ‰¾è¯¥æ–‡ä»¶ã€‚</p>
<pre><code>require å’Œ include å‡ ä¹å®Œå…¨ä¸€æ ·ï¼Œé™¤äº†å¤„ç†å¤±è´¥çš„æ–¹å¼ä¸åŒä¹‹å¤–ã€‚require åœ¨å‡ºé”™æ—¶äº§ç”Ÿ E_COMPILE_ERROR çº§åˆ«çš„é”™è¯¯ã€‚æ¢å¥è¯è¯´å°†å¯¼è‡´è„šæœ¬ä¸­æ­¢è€Œ include åªäº§ç”Ÿè­¦å‘Šï¼ˆE_WARNINGï¼‰ï¼Œè„šæœ¬ä¼šç»§ç»­è¿è¡Œã€‚
</code></pre>
<h4 id="ç®€è¿°å¦‚ä½•å¾—åˆ°å½“å‰æ‰§è¡Œè„šæœ¬è·¯å¾„åŒ…æ‹¬æ‰€å¾—åˆ°å‚æ•°">ç®€è¿°å¦‚ä½•å¾—åˆ°å½“å‰æ‰§è¡Œè„šæœ¬è·¯å¾„,åŒ…æ‹¬æ‰€å¾—åˆ°å‚æ•°</h4>
<pre><code>__DIR__;
__FILE__;

getopt();
$argv;
$_REQUEST;
$_PUT = file_get_contents('php://input');
</code></pre>
<h4 id="ç»Ÿè®¡æ•°ç»„ä¸­æ‰€æœ‰å€¼å‡ºç°çš„æ¬¡æ•°å¯¹ç»Ÿè®¡çš„ç»“æœæŒ‰å‡ºç°çš„æ¬¡æ•°æ’åº">ç»Ÿè®¡æ•°ç»„ä¸­æ‰€æœ‰å€¼å‡ºç°çš„æ¬¡æ•°ï¼Œå¯¹ç»Ÿè®¡çš„ç»“æœï¼ŒæŒ‰å‡ºç°çš„æ¬¡æ•°æ’åºã€‚</h4>
<pre><code>$b = array_count_values($a);
arsort($b);
</code></pre>
<h4 id="ä¸Šä¼ æ–‡ä»¶çš„æ—¶å€™æç¤º413-request-entity-too-large-çš„è§£å†³æ–¹æ³•">ä¸Šä¼ æ–‡ä»¶çš„æ—¶å€™æç¤º413 Request Entity Too Large çš„è§£å†³æ–¹æ³•</h4>
<pre><code>#nginx.conf
client_max_body_size 10M
#php.ini
upload_max_filesize æ‰€ä¸Šä¼ çš„æ–‡ä»¶çš„æœ€å¤§å¤§å°ã€‚
post_max_size       è®¾å®š POST æ•°æ®æ‰€å…è®¸çš„æœ€å¤§å¤§å°ã€‚
memory_limit        è®¾å®šäº†ä¸€ä¸ªè„šæœ¬æ‰€èƒ½å¤Ÿç”³è¯·åˆ°çš„æœ€å¤§å†…å­˜å­—èŠ‚æ•°ã€‚
/*Sets max size of post data allowed. This setting also affects file upload. To upload large files, this value must be larger than upload_max_filesize. If memory limit is enabled by your configure script, memory_limit also affects file uploading. Generally speaking, memory_limit should be larger than post_max_size. */
</code></pre>
<h4 id="ç”¨phpæ‰“å°å‡ºåŒ—äº¬å‰ä¸€å¤©çš„æ—¶é—´æ ¼å¼æ˜¯2008-2-8-180010">ç”¨PHPæ‰“å°å‡ºåŒ—äº¬å‰ä¸€å¤©çš„æ—¶é—´æ ¼å¼æ˜¯2008-2-8 18:00:10</h4>
<pre><code>date('Y-n-j H:i:s',strtotime('-1 days));
</code></pre>
<h4 id="ç¼–å†™å‡½æ•°å–å¾—ä¸Šä¸€æœˆçš„ç¬¬ä¸€å¤©å’Œæœ€åä¸€å¤©">ç¼–å†™å‡½æ•°å–å¾—ä¸Šä¸€æœˆçš„ç¬¬ä¸€å¤©å’Œæœ€åä¸€å¤©</h4>
<pre><code>date('Y-m-d', strtotime('last day of -1 months'));
date('Y-m-d', strtotime('first day of -1 months'));

strtotime('-1 days', strtotime(date('Y-m-01', time()))); //ä¸Šä¸€æœˆçš„æœ€åä¸€å¤©
mktime(0, 0, 0, date('m')-1, 1, date('Y')); //ä¸Šä¸€æœˆçš„ç¬¬ä¸€å¤©
</code></pre>
<h4 id="è®¾æœ‰è¿™æ ·ä¸€ä¸ªæ•°ç»„a--array-arrayid0-arrayid1-è¯·é—®å¦‚ä½•åˆ¤æ–­id500æ˜¯å¦åœ¨è¿™ä¸ªæ•°ç»„å†…">è®¾æœ‰è¿™æ ·ä¸€ä¸ªæ•°ç»„$a = array( array(id=&gt;0), array(id=&gt;1) ),è¯·é—®å¦‚ä½•åˆ¤æ–­id=&gt;500æ˜¯å¦åœ¨è¿™ä¸ªæ•°ç»„å†…?</h4>
<pre><code>in_array(array('id' =&gt; 500), $a);
</code></pre>
<h4 id="è®¡ç®—å­—ç¬¦ä¸²ä¸­æŸä¸ªå­—ç¬¦çš„å‡ºç°æ¬¡æ•°">è®¡ç®—å­—ç¬¦ä¸²ä¸­æŸä¸ªå­—ç¬¦çš„å‡ºç°æ¬¡æ•°</h4>
<pre><code>str_word_count($string);
</code></pre>
<h4 id="å°†å­—ç¬¦012è½¬æ¢æˆåè¿›åˆ¶æ•°å­—">å°†å­—ç¬¦012è½¬æ¢æˆåè¿›åˆ¶æ•°å­—ã€‚</h4>
<pre><code>octdec('012');
(int)012;
</code></pre>
<h4 id="å¦‚ä½•è®©phpç¨‹åºè®¾ç½®æŠ¥é”™">å¦‚ä½•è®©PHPç¨‹åºè®¾ç½®æŠ¥é”™ï¼Ÿ</h4>
<pre><code>error_reporting(E_ALL);
ini_set('display_errors', 1);
</code></pre>
<h4 id="phpçš„elseif-å’Œelse-ifåŒºåˆ«">phpçš„elseif å’Œelse ifåŒºåˆ«?</h4>
<pre><code>elseifå¯ä»¥ç”¨äºå†’å·ï¼Œè€Œelse ifåˆ™ä¸èƒ½ã€‚
</code></pre>

<h1 id="phpæ­£åˆ™è¡¨è¾¾å¼">PHPæ­£åˆ™è¡¨è¾¾å¼</h1>
<p>pregæ˜¯ä¸Perlå…¼å®¹æ­£åˆ™è¡¨è¾¾å¼(Regular Expressions(Perl-Compatible));eregä»¥POSIXä¸ºåŸºç¡€(Regular Expression (POSIX Extended)),UNIXçš„å¯ç§»æ¤æ“ä½œç³»ç»Ÿæ¥å£(As of PHP 5.3.0 this extension is deprecated, calling any function provided by this extension will issue an E_DEPRECATED notice).</p>

<h2 id="æ­£åˆ™è¡¨è¾¾çš„å…ƒç´ ">æ­£åˆ™è¡¨è¾¾çš„å…ƒç´ :</h2>

<h4 id="åˆ†éš”ç¬¦">åˆ†éš”ç¬¦</h4>

<p>æ¨¡å¼éœ€è¦ç”±åˆ†éš”ç¬¦é—­åˆåŒ…è£¹ã€‚åˆ†éš”ç¬¦å¯ä»¥ä½¿ä»»æ„éå­—æ¯æ•°å­—ã€éåæ–œçº¿ã€éç©ºç™½å­—ç¬¦ã€‚
ç»å¸¸ä½¿ç”¨çš„åˆ†éš”ç¬¦æ˜¯æ­£æ–œçº¿(/)ã€hashç¬¦å·(#) ä»¥åŠå–åç¬¦å·(~)</p>

<h4 id="åŸå­">åŸå­</h4>
<h4 id="å…ƒå­—ç¬¦">å…ƒå­—ç¬¦</h4>
<h4 id="è½¬ä¹‰åºåˆ—">è½¬ä¹‰åºåˆ—</h4>
<h4 id="æ¨¡å¼ä¿®æ­£ç¬¦">æ¨¡å¼ä¿®æ­£ç¬¦</h4>

<p><a href="http://www.php.net/manual/zh/book.pcre.php">PCRE å‡½æ•° Â¶</a>
<a href="http://book.douban.com/subject/2154713/"><em>ç²¾é€šæ­£åˆ™è¡¨è¾¾å¼ : ç¬¬3ç‰ˆ</em></a></p>
<h4 id="è¯·ç”¨æ­£åˆ™åŒ¹é…hrefçš„å±æ€§">è¯·ç”¨æ­£åˆ™åŒ¹é…hrefçš„å±æ€§</h4>
<pre><code>$link = '&lt;a href="http://yanpeipan.github.io/" title="PHPé¢è¯•æ€»ç»“"&gt;PHPé¢è¯•æ€»ç»“&lt;/a&gt;';
preg_match('/href="(.*)"/U', $link, $match);
</code></pre>
<h4 id="è¯·å†™ä¸€ä¸ªå‡½æ•°éªŒè¯ç”µå­é‚®ç®±çš„æ ¼å¼æ˜¯å¦æ­£ç¡®">è¯·å†™ä¸€ä¸ªå‡½æ•°éªŒè¯ç”µå­é‚®ç®±çš„æ ¼å¼æ˜¯å¦æ­£ç¡®</h4>
<p>é™¤äº†ä½¿ç”¨æ­£åˆ™ä¹‹å¤–ï¼Œè¿˜å¯ä»¥ä½¿ç”¨<a href="http://cn2.php.net/manual/zh/book.filter.php">Data Filtering Â¶</a></p>
<pre><code>preg_match('/^[\d\w-_]+@[\d\w-_]+(\.[\d\w-_]+)+$/', $email, $match);

filter_var($email, FILTER_VALIDATE_EMAIL);
</code></pre>
<h4 id="ä»å­—ç¬¦ä¸²ä¸­æå–æ—¥æœŸæ—¶é—´æ ¼å¼y-m-dy-n-jymdynj">ä»å­—ç¬¦ä¸²ä¸­æå–æ—¥æœŸï¼Œæ—¶é—´æ ¼å¼ï¼šY-m-d,Y-n-j,Ymd,Ynj</h4>
<pre><code>if (preg_match('/(?&lt;!\d)(?:[\d]{4}+-?\d{1,2}-?\d{1,2})(?!\d)/', $title, $match)) {
        var_dump($match);
}
</code></pre>
<hr />

<h1 id="å¼•ç”¨">å¼•ç”¨</h1>
<p>åœ¨ PHP ä¸­å¼•ç”¨æ„å‘³ç€ç”¨ä¸åŒçš„åå­—è®¿é—®åŒä¸€ä¸ªå˜é‡å†…å®¹ã€‚è¿™å¹¶ä¸åƒ C çš„æŒ‡é’ˆï¼Œæ›¿ä»£çš„æ˜¯ï¼Œå¼•ç”¨æ˜¯ç¬¦å·è¡¨åˆ«åã€‚æ³¨æ„åœ¨ PHP ä¸­ï¼Œå˜é‡åå’Œå˜é‡å†…å®¹æ˜¯ä¸ä¸€æ ·çš„ï¼Œå› æ­¤åŒæ ·çš„å†…å®¹å¯ä»¥æœ‰ä¸åŒçš„åå­—ã€‚æœ€æ¥è¿‘çš„æ¯”å–»æ˜¯ Unix çš„æ–‡ä»¶åå’Œæ–‡ä»¶æœ¬èº«â€”â€”å˜é‡åæ˜¯ç›®å½•æ¡ç›®ï¼Œè€Œå˜é‡å†…å®¹åˆ™æ˜¯æ–‡ä»¶æœ¬èº«ã€‚å¼•ç”¨å¯ä»¥è¢«çœ‹ä½œæ˜¯ Unix æ–‡ä»¶ç³»ç»Ÿä¸­çš„ hardlinkã€‚
å†™å¤åˆ¶(copy on write)
å†™æ”¹å˜(change on write)</p>
<h4 id="è¯·è¯´æ˜phpä¸­ä¼ å€¼ä¸å¼•ç”¨çš„åŒºåˆ«å’Œä½¿ç”¨åœºæ™¯">è¯·è¯´æ˜PHPä¸­ä¼ å€¼ä¸å¼•ç”¨çš„åŒºåˆ«å’Œä½¿ç”¨åœºæ™¯</h4>
<pre><code>åº”è¯¥é¿å…ä½¿ç”¨å¼•ç”¨ï¼Œé™¤éä½ éå¸¸æ¸…æ¥šè¦åšä»€ä¹ˆï¼Œå¦‚è°ƒç”¨å‡½æ•°ä¿®æ”¹å¤šä¸ªå˜é‡ã€‚
</code></pre>
<h4 id="è¯·è§£é‡Šä»¥ä¸‹ä»£ç æ¯ä¸€æ­¥çš„è¿è¡Œaæœ€åçš„ç»“æœä¸º">è¯·è§£é‡Šä»¥ä¸‹ä»£ç æ¯ä¸€æ­¥çš„è¿è¡Œ,$aæœ€åçš„ç»“æœä¸º?</h4>
<pre><code>$a = array('a', 'b', 'c');
  foreach($a as $key =&gt; $value) {
    $val = &amp;$a[$key];
}
</code></pre>
<hr />

<h1 id="session--cookie">Session &amp; Cookie</h1>

<p><a href="http://cn2.php.net/manual/zh/intro.session.php">Session ç®€ä»‹ Â¶</a>
sessionè¢«ç”¨äºè¡¨ç¤ºä¸€ä¸ªæŒç»­çš„è¿æ¥çŠ¶æ€ï¼Œåœ¨ç½‘ç«™è®¿é—®ä¸­ä¸€èˆ¬æŒ‡ä»£å®¢æˆ·ç«¯æµè§ˆå™¨çš„è¿›ç¨‹ä»å¼€å¯åˆ°ç»“æŸçš„è¿‡ç¨‹ã€‚sessionå…¶å®å°±æ˜¯ç½‘ç«™åˆ†æçš„è®¿é—®ï¼ˆvisitsï¼‰åº¦é‡ï¼Œè¡¨ç¤ºä¸€ä¸ªè®¿é—®çš„è¿‡ç¨‹ã€‚PHP session å˜é‡ç”¨äºå­˜å‚¨æœ‰å…³ç”¨æˆ·ä¼šè¯çš„ä¿¡æ¯ï¼Œæˆ–æ›´æ”¹ç”¨æˆ·ä¼šè¯çš„è®¾ç½®ã€‚Session å˜é‡ä¿å­˜çš„ä¿¡æ¯æ˜¯å•ä¸€ç”¨æˆ·çš„ï¼Œå¹¶ä¸”å¯ä¾›åº”ç”¨ç¨‹åºä¸­çš„æ‰€æœ‰é¡µé¢ä½¿ç”¨ã€‚</p>

<p>cookie æ˜¯ä¸€å°æ®µæ–‡æœ¬ä¿¡æ¯ï¼Œä¼´éšç€ç”¨æˆ·è¯·æ±‚å’Œé¡µé¢åœ¨WebæœåŠ¡å™¨å’Œæµè§ˆå™¨ä¹‹é—´ä¼ é€’ã€‚ç”¨æˆ·æ¯æ¬¡è®¿é—®ç«™ç‚¹æ—¶ï¼ŒWebåº”ç”¨ç¨‹åºéƒ½å¯ä»¥è¯»å–cookieåŒ…å«çš„ä¿¡æ¯ã€‚</p>

<p>cookieçš„ä½œç”¨å°±æ˜¯ä¸ºäº†è§£å†³HTTPåè®®æ— çŠ¶æ€çš„ç¼ºé™·æ‰€ä½œçš„åŠªåŠ›ï¼Œå®šä¹‰äºï¼š<a href="http://www.ietf.org/rfc/rfc2965.txt">IETF RFC 2965 HTTP State Management Mechanism</a></p>

<p>cookieåˆ†ä¸ºäºŒç§:</p>
<ol>
  <li>sessionçš„å¸¸è§å®ç°å½¢å¼æ˜¯ä¼šè¯cookieï¼ˆsession cookieï¼‰ï¼Œå³æœªè®¾ç½®è¿‡æœŸæ—¶é—´çš„cookieï¼Œè¿™ä¸ªcookieçš„é»˜è®¤ç”Ÿå‘½å‘¨æœŸä¸ºæµè§ˆå™¨ä¼šè¯æœŸé—´ï¼Œåªè¦å…³é—­æµè§ˆå™¨çª—å£ï¼Œcookieå°±æ¶ˆå¤±äº†ã€‚</li>
  <li>æŒä¹…cookieï¼ˆpersistent cookiesï¼‰æ˜¯æŒ‡å­˜æ”¾äºå®¢æˆ·ç«¯ç¡¬ç›˜ä¸­çš„ cookieä¿¡æ¯ï¼ˆè®¾ç½®äº†ä¸€å®šçš„æœ‰æ•ˆæœŸé™ï¼‰ï¼Œå½“ç”¨æˆ·è®¿é—®æŸç½‘ç«™æ—¶ï¼Œæµè§ˆå™¨å°±ä¼šåœ¨æœ¬åœ°ç¡¬ç›˜ä¸ŠæŸ¥æ‰¾ä¸è¯¥ç½‘ç«™ç›¸å…³è”çš„cookieã€‚</li>
</ol>

<p>æµè§ˆå™¨çš„cookieè¢«ç¦æ­¢åsessionå°±éœ€è¦ç”¨getæ–¹æ³•çš„URLé‡å†™çš„æœºåˆ¶æˆ–ä½¿ç”¨POSTæ–¹æ³•æäº¤éšè—è¡¨å•çš„å½¢å¼æ¥å®ç°ã€‚</p>
<h4 id="sessionä¸cookieçš„åŒºåˆ«">sessionä¸cookieçš„åŒºåˆ«?</h4>
<pre><code>1. ä½œç”¨ : sessionè¢«ç”¨äºè¡¨ç¤ºä¸€ä¸ªæŒç»­çš„è¿æ¥çŠ¶æ€;cookieè¢«ç”¨äºè·Ÿè¸ªä¼šè¯
2. ä½œç”¨åŸŸ : Session å˜é‡ä¿å­˜çš„ä¿¡æ¯æ˜¯å•ä¸€ç”¨æˆ·çš„ï¼Œå¹¶ä¸”å¯ä¾›åº”ç”¨ç¨‹åºä¸­çš„æ‰€æœ‰é¡µé¢ä½¿ç”¨;cookie path/domain,åŒæºç­–ç•¥
3. æ•°æ® : sessionå­˜æ”¾äºæœåŠ¡ç«¯,cookieå­˜æ”¾äºå®¢æˆ·ç«¯,å¹¶ä¼šè¢«é™„åŠ åœ¨æ¯ä¸ªHTTPè¯·æ±‚ä¸­;åœ¨å‘é€ cookie æ—¶
4. ç¼–ç  ï¼šcookie çš„å€¼ä¼šè‡ªåŠ¨è¿›è¡Œ URL ç¼–ç ï¼Œåœ¨å–å›æ—¶è¿›è¡Œè‡ªåŠ¨è§£ç 
4. ç”Ÿå‘½å‘¨æœŸ : sessionåœ¨session.gc_maxlifetimeä¹‹åæœ‰å‡ ç‡è¢«å›æ”¶;æŒä¹…cookieä¼šåœ¨è¿‡æœŸåç«‹åˆ»å¤±æ•ˆ;ä¸´æ—¶cookieç”Ÿå‘½å‘¨æœŸä¸ºæµè§ˆå™¨ä¼šè¯æœŸé—´
5. å®‰å…¨æ€§ : å®¢æˆ·ç«¯å¯ä»¥æŸ¥çœ‹/ä¿®æ”¹cookie;cookieæ˜¯é€šè¿‡HTTPåè®®æ˜æ–‡ä¼ é€’çš„;sessionå¯¹ç”¨æˆ·æ˜¯é€æ˜çš„;(cookieçªƒå–ä¸ä¼šè¯åŠ«æŒ)
6. é™åˆ¶ : Cookieçš„å¤§å°é™åˆ¶åœ¨4KBå·¦å³
</code></pre>
<h4 id="sessionçš„åƒåœ¾å›æ”¶æœºåˆ¶gc">sessionçš„åƒåœ¾å›æ”¶æœºåˆ¶gc</h4>
<p><a href="http://www.laruence.com/2011/03/29/1949.html">æ·±å…¥ç†è§£PHPåŸç†ä¹‹Session Gcçš„ä¸€ä¸ªå°æ¦‚ç‡Notice</a></p>
<pre><code>åœ¨phpä¸­ï¼Œsessionçš„å›æ”¶æœºåˆ¶ä¸»è¦ä¾é ä¸‰ä¸ªé…ç½®å…±åŒå®ç°(åœ¨php.iniæ–‡ä»¶ä¸­)ï¼Œåˆ†åˆ«æ˜¯ï¼š
session.gc_maxlifetime = 1440 ;è®¾ç½®php sessionçš„æœ‰æ•ˆæœŸ
session.gc_probability = 1 ;è®¾ç½®gcå›æ”¶æœºåˆ¶çš„è¢«é™¤æ•°
session.gc_divisor     = 100  ;è®¾ç½®gcå›æ”¶æœºåˆ¶çš„é™¤æ•°
åœ¨PHPä¸­, å¦‚æœä½¿ç”¨file_handlerä½œä¸ºSessionçš„save handlerï¼Œ
é‚£ä¹ˆå°±æœ‰æ¦‚ç‡åœ¨æ¯æ¬¡session_startçš„æ—¶å€™è¿è¡ŒSessionçš„Gcè¿‡ç¨‹ã€‚
session gcè¢«è§¦å‘æ—¶,å°±ä¼šæ£€æŸ¥/tmp/sess_*çš„æ–‡ä»¶,
å¦‚æœæœ€åçš„ä¿®æ”¹æ—¶é—´åˆ°ç°åœ¨è¶…è¿‡äº†1440ç§’(gc_maxlifetimeçš„å€¼),å°±å°†å…¶åˆ é™¤,æ„å‘³ç€è¿™äº›sessionè¿‡æœŸå¤±æ•ˆ.
å…¶è°ƒç”¨æ¦‚ç‡ç›¸å½“äºsession.gc_probability/session.gc_divisorã€‚
å¯¹äºå¤§å‹ç½‘ç«™æ¥è¯´ï¼Œé¢‘ç¹åœ°å›æ”¶ä¼šç»™æœåŠ¡å™¨å¸¦æ¥å¾ˆå¤§çš„å¼€é”€,
ä¸€èˆ¬ä¼šå°†session.gc_probability/session.gc_divisorè®¾ç½®çš„è¶³å¤Ÿå°ã€‚
</code></pre>
<h4 id="å¦‚ä½•è®¾ç½®ä¸€ä¸ªä¸¥æ ¼30åˆ†é’Ÿè¿‡æœŸçš„session">å¦‚ä½•è®¾ç½®ä¸€ä¸ªä¸¥æ ¼30åˆ†é’Ÿè¿‡æœŸçš„Session</h4>
<p><a href="http://www.laruence.com/2012/01/10/2469.html">å¦‚ä½•è®¾ç½®ä¸€ä¸ªä¸¥æ ¼30åˆ†é’Ÿè¿‡æœŸçš„Session</a></p>
<h4 id="å¤§å‹ç½‘ç«™ä½¿ç”¨sessionæ—¶åº”è¯¥æ³¨æ„å“ªäº›é—®é¢˜">å¤§å‹ç½‘ç«™ä½¿ç”¨Sessionæ—¶ï¼Œåº”è¯¥æ³¨æ„å“ªäº›é—®é¢˜ï¼Ÿ</h4>
<pre><code>
</code></pre>
<h4 id="å¦‚ä½•å®ç°sessionè·¨åŸŸåŒæ­¥">å¦‚ä½•å®ç°sessionè·¨åŸŸåŒæ­¥ï¼Ÿ</h4>
<h4 id="å¦‚ä½•è§£å†³å¤šç«™ç‚¹sessionå†²çª">å¦‚ä½•è§£å†³å¤šç«™ç‚¹sessionå†²çªï¼Ÿ</h4>
<h4 id="å•ç‚¹ç™»é™†å¦‚ä½•å®ç°">å•ç‚¹ç™»é™†å¦‚ä½•å®ç°ï¼Ÿ</h4>
<pre><code>
</code></pre>

<hr />

<h1 id="http">HTTP</h1>
<h4 id="404é¡µé¢">404é¡µé¢</h4>
<h4 id="é‡å®šå‘">é‡å®šå‘</h4>
<h4 id="å¦‚ä½•åˆ©ç”¨headerå®ç°ç›´æ¥ä¸‹è½½ä¿å­˜è€Œä¸æ˜¯è¯»å–">å¦‚ä½•åˆ©ç”¨headerå®ç°ç›´æ¥ä¸‹è½½ä¿å­˜è€Œä¸æ˜¯è¯»å–</h4>
<pre><code>header('Content-type: application/pdf');
header('Content-Disposition: attachment; filename="ä¿å­˜æ—¶çš„æ–‡ä»¶å.pdf"');
</code></pre>
<h4 id="ç”¨phpå†™å‡ºæ˜¾ç¤ºå®¢æˆ·ç«¯ipä¸æœåŠ¡ç«¯ipçš„ä»£ç ">ç”¨PHPå†™å‡ºæ˜¾ç¤ºå®¢æˆ·ç«¯IPä¸æœåŠ¡ç«¯IPçš„ä»£ç </h4>
<h4 id="getä¸postæäº¤æ–¹æ³•çš„åŒºåˆ«å’Œé™åˆ¶">getä¸postæäº¤æ–¹æ³•çš„åŒºåˆ«å’Œé™åˆ¶?</h4>
<h4 id="ajaxè·¨åŸŸè®¿é—®">AJAXè·¨åŸŸè®¿é—®</h4>
<pre><code>ä½¿ç”¨domainå±æ€§åªèƒ½å®ç°AJAXè·¨å­åŸŸè®¿é—®ï¼›
iframeéœ€è¦åŒæ–¹æœåŠ¡å™¨è¯·æ±‚å’Œè¢«è¯·æ±‚é¡µé¢éƒ½è¦åšè½®è¯¢ç›‘å¬locationå¯¹è±¡çš„hashå±æ€§ï¼›
ä½¿ç”¨scriptæ ‡è®°åˆ™è¦æ±‚è¢«è®¿é—®æ•°æ®æ ¼å¼ä¸ºjså¯è°ƒç”¨çš„å˜é‡æˆ–å‡½æ•°ï¼›
ä½¿ç”¨flashè°ƒç”¨éœ€è¦è¢«è¯·æ±‚æœåŠ¡å™¨æ ¹ç›®å½•æœ‰crossdomain.xmlæ–‡ä»¶ï¼›
ä½¿ç”¨jsonpéœ€è¦è¢«è¯·æ±‚æœåŠ¡å™¨æ¥å—åœ°å€åŠ å›è°ƒå‡½æ•°å‚æ•°å’Œè¿”å›jsonæ•°æ®ï¼›
Ajaxè¯·æ±‚æœ¬åœ°çš„phpï¼Œç”±phpé€šè¿‡fopenå®Œæˆè·¨åŸŸè¯·æ±‚ï¼›
è®¾ç½®æœ¬åŸŸapacheæœåŠ¡å™¨çš„åå‘ä»£ç†ã€‚
</code></pre>

<hr />

<h1 id="design-pattern">Design pattern</h1>
<p><a href="http://book.douban.com/subject/3765462/"><em>è®¾è®¡æ¨¡å¼_Gang of Four](http://book.douban.com/subject/1052241/)
[_PHPé«˜çº§ç¨‹åºè®¾è®¡</em></a>
<a href="http://book.douban.com/subject/4746407/"><em>æ·±å…¥PHPï¼šé¢å‘å¯¹è±¡ã€æ¨¡å¼ä¸å®è·µï¼ˆç¬¬2ç‰ˆï¼‰</em></a></p>
<h4 id="æƒ°æ€§åŠ è½½">æƒ°æ€§åŠ è½½</h4>
<h4 id="è§‚å¯Ÿè€…æ¨¡å¼">è§‚å¯Ÿè€…æ¨¡å¼</h4>
<pre><code>class Observable implements SplSubject
{
    private $storage;

    function __construct()
    {
        $this-&gt;storage = new SplObjectStorage();
    }

    function attach(SplObserver $observer)
    {
        $this-&gt;storage-&gt;attach($observer);
    }

    function detach(SplObserver $observer)
    {
        $this-&gt;storage-&gt;detach($observer);
    }

    function notify()
    {
        foreach ($this-&gt;storage as $obj) {
            $obj-&gt;update($this);
        }
    }
    //...
}

abstract class Observer implements SplObserver
{
    private $observable;

    function __construct(Observable $observable)
    {
        $this-&gt;observable = $observable;
        $observable-&gt;attach($this);
    }

    function update(SplSubject $subject)
    {
        if ($subject === $this-&gt;observable) {
            $this-&gt;doUpdate($subject);
        }
    }

    abstract function doUpdate(Observable $observable);
}

class ConcreteObserver extends Observer
{
    function doUpdate(Observable $observable)
    {
        //...
    }
}

$observable = new Observable();
new ConcreteObserver($observable);
</code></pre>
<h4 id="å•ä¾‹æ¨¡å¼">å•ä¾‹æ¨¡å¼</h4>
<p><a href="http://www.lfyzjck.com/php-sington-best-practice/">PHPå•ä¾‹æ¨¡å¼æœ€ä½³å®è·µ</a>
<a href="http://php.net/manual/zh/language.oop5.late-static-bindings.php">åæœŸé™æ€ç»‘å®š Â¶</a></p>
<pre><code>class Singleton
{
    protected static $_instance = null;
    protected function __construct()
    {

    }
    protected function __clone()
    {
        //disallow clone
        trigger_error('Clone is not allow !', E_USER_ERROR);
    }
    public function getInstance()
    {
        if (static::$_instance === null) {
            static::$_instance = new static;
        }
        return static::$_instance;
    }
}
class D extends Singleton
{
    protected static $_instance = null;
}
$c = Singleton::getInstance();
$d = D::getInstance();
var_dump($c === $d);
</code></pre>

<hr />

<h1 id="php-predefined-interfaces">PHP Predefined Interfaces</h1>
<p><a href="http://www.nowamagic.net/librarys/veda/detail/2167">PHP Predefined Interfaces é¢„å®šä¹‰æ¥å£</a>
<a href="http://www.php.net/manual/en/reserved.interfaces.php">Predefined Interfaces and Classes Â¶</a></p>
<h4 id="traversable">Traversable</h4>
<p>This interface has no methods, its only purpose is to be the base interface for all traversable classes.</p>
<pre><code>if( !is_array( $items ) &amp;&amp; !$items instanceof Traversable )
    //Throw exception here
</code></pre>
<h4 id="iterator">Iterator</h4>
<p>Interface for external iterators or objects that can be iterated themselves internally.</p>
<pre><code>Iterator extends Traversable
{
    //è¿”å›å½“å‰ç´¢å¼•æ¸¸æ ‡æŒ‡å‘çš„å…ƒç´ 
    abstract public mixed current(void)
    //è¿”å›å½“å‰ç´¢å¼•æ¸¸æ ‡æŒ‡å‘çš„å…ƒç´ çš„é”®å
    abstract public scalar key(void)
    //ç§»åŠ¨å½“å‰ç´¢å¼•æ¸¸æ ‡æŒ‡å‘ä¸‹ä¸€å…ƒç´ 
    abstract public void next(void)
    //é‡ç½®ç´¢å¼•æ¸¸æ ‡çš„æŒ‡å‘ç¬¬ä¸€ä¸ªå…ƒç´ 
    abstract public void rewind(void)
    //åˆ¤æ–­å½“å‰ç´¢å¼•æ¸¸æ ‡æŒ‡å‘çš„æ˜¯å¦æ˜¯ä¸€ä¸ªå…ƒç´ ï¼Œå¸¸å¸¸åœ¨è°ƒç”¨ rewind()æˆ– next()ä½¿ç”¨
    abstract public boolean valid(void)
}
</code></pre>
<h4 id="iteratoraggregate">IteratorAggregate</h4>
<p><a href="http://cn2.php.net/manual/en/class.iteratoraggregate.php">The IteratorAggregate interface Â¶</a></p>
<pre><code>class myData implements IteratorAggregate {
    public $property1 = "Public property one";
    public $property2 = "Public property two";
    public $property3 = "Public property three";

    public function __construct() {
        $this-&gt;property4 = "last property";
    }

    public function getIterator() {
        return new ArrayIterator($this);
    }
}

$obj = new myData;

foreach($obj as $key =&gt; $value) {
    var_dump($key, $value);
    echo "\n";
}
</code></pre>
<h4 id="arrayaccess">ArrayAccess</h4>
<p>Interface to provide accessing objects as arrays.</p>
<pre><code> ArrayAccess {
/#### Methods ####/
abstract public boolean offsetExists ( mixed $offset )
abstract public mixed offsetGet ( mixed $offset )
abstract public void offsetSet ( mixed $offset , mixed $value )
abstract public void offsetUnset ( mixed $offset )
}
</code></pre>
<h4 id="serializable">Serializable</h4>
<pre><code> Serializable {
/#### Methods ####/
abstract public string serialize ( void )
abstract public void unserialize ( string $serialized )
}
</code></pre>
<h4 id="closure">Closure</h4>
<pre><code>class A {
    private static $sfoo = 1;
    private $ifoo = 2;
}
$cl1 = static function() {
    return A::$sfoo;
};
$cl2 = function() {
    return $this-&gt;ifoo;
};

$bcl1 = Closure::bind($cl1, null, 'A');
$bcl2 = Closure::bind($cl2, new A(), 'A');
echo $bcl1(), "\n";
echo $bcl2(), "\n";
/################################################################################################################/
class A {
    function __construct($val) {
        $this-&gt;val = $val;
    }
    function getClosure() {
        //returns closure bound to this object and scope
        return function() { return $this-&gt;val; };
    }
}

$ob1 = new A(1);
$ob2 = new A(2);

$cl = $ob1-&gt;getClosure();
echo $cl(), "\n";
$cl = $cl-&gt;bindTo($ob2);
echo $cl(), "\n";
</code></pre>
<h4 id="generator">Generator</h4>

<hr />

<h1 id="spl">SPL</h1>
<p>SPLæ˜¯Standard PHP Libraryï¼ˆPHPæ ‡å‡†åº“ï¼‰çš„ç¼©å†™ã€‚
æ ¹æ®å®˜æ–¹å®šä¹‰ï¼Œå®ƒæ˜¯â€a collection of interfaces and classes that are meant to solve standard problemsâ€ã€‚ä½†æ˜¯ï¼Œç›®å‰åœ¨ä½¿ç”¨ä¸­ï¼ŒSPLæ›´å¤šåœ°è¢«çœ‹ä½œæ˜¯ä¸€ç§ä½¿objectï¼ˆç‰©ä½“ï¼‰æ¨¡ä»¿arrayï¼ˆæ•°ç»„ï¼‰è¡Œä¸ºçš„interfaceså’Œclassesã€‚
<a href="http://www.ruanyifeng.com/blog/2008/07/php_spl_notes.html">PHP SPLç¬”è®°</a>
<a href="http://cn2.php.net/manual/zh/book.spl.php">PHPæ ‡å‡†åº“ (SPL) Â¶</a></p>
<h4 id="datastructures">Datastructures</h4>
<h4 id="iterators">Iterators</h4>
<h4 id="interfaces">Interfaces</h4>
<h4 id="exceptions">Exceptions</h4>
<h4 id="spl-functions">SPL Functions</h4>
<h4 id="file-handling">File Handling</h4>
<h4 id="miscellaneous-classes-and-interfaces">Miscellaneous Classes and Interfaces</h4>

<hr />

<h1 id="ç½‘ç»œç¼–ç¨‹">ç½‘ç»œç¼–ç¨‹</h1>
<h4 id="httpå“åº”ç ä»¥åŠå«ä¹‰">HTTPå“åº”ç ä»¥åŠå«ä¹‰</h4>
<h4 id="linuxç«¯å£ä¸æœåŠ¡">Linuxç«¯å£ä¸æœåŠ¡</h4>
<h4 id="ç¦ç”¨cookieåsessionè¿˜èƒ½ä½¿ç”¨å—">ç¦ç”¨CookieåSessionè¿˜èƒ½ä½¿ç”¨å—?</h4>
<h4 id="é€šè¿‡é¡µé¢è¾“å…¥ç”¨æˆ·åabcå’Œå¯†ç 123ç™»é™†åˆ°www10086cnè¯·å†™å‡ºè¯¥æ¬¡è¯·æ±‚çš„httpåè®®æŠ¥æ–‡åŒ…æ‹¬è¯·æ±‚è¡Œæ¶ˆæ¯æŠ¥å¤´è¯·æ±‚æ­£æ–‡è¯·å¹¶ä½¿ç”¨socketç›¸å…³å‡½æ•°å®ç°">é€šè¿‡é¡µé¢è¾“å…¥ç”¨æˆ·åabcå’Œå¯†ç 123ç™»é™†åˆ°www.10086.cn,è¯·å†™å‡ºè¯¥æ¬¡è¯·æ±‚çš„HTTPåè®®æŠ¥æ–‡(åŒ…æ‹¬è¯·æ±‚è¡Œ,æ¶ˆæ¯æŠ¥å¤´,è¯·æ±‚æ­£æ–‡),è¯·å¹¶ä½¿ç”¨socketç›¸å…³å‡½æ•°å®ç°</h4>

<hr />

<h1 id="phpé«˜çº§">PHPé«˜çº§</h1>
<h4 id="ajaxæ•°æ®åº“è§¦å‘å™¨guiä¸­æ–­æœºåˆ¶çš„å…±åŒæ€æƒ³è°ˆä¸€è°ˆè¯¥ç§æ€æƒ³æœºåˆ¶">Ajax,æ•°æ®åº“è§¦å‘å™¨ï¼ŒGUIï¼Œä¸­æ–­æœºåˆ¶çš„å…±åŒæ€æƒ³ã€‚è°ˆä¸€è°ˆè¯¥ç§æ€æƒ³ï¼ˆæœºåˆ¶ï¼‰ã€‚</h4>
<h4 id="æŠŠä¸€ç¯‡è‹±æ–‡æ–‡æ¡£ä¸­æ‰€æœ‰å•è¯çš„é¦–å­—æ¯è½¬ä¸ºå¤§å†™æ–‡æ¡£å­˜åœ¨doctxtä¸­å¯ä»¥åœ¨å¤šç§ç¼–ç¨‹è¯­è¨€ä¸­é€‰æ‹©ccjavaphpå†™å‡ºä½ çš„æ€è·¯å°½é‡ä¼˜åŒ–ä½ çš„ç¨‹åº">æŠŠä¸€ç¯‡è‹±æ–‡æ–‡æ¡£ä¸­æ‰€æœ‰å•è¯çš„é¦–å­—æ¯è½¬ä¸ºå¤§å†™ï¼Œæ–‡æ¡£å­˜åœ¨doc.txtä¸­ã€‚å¯ä»¥åœ¨å¤šç§ç¼–ç¨‹è¯­è¨€ä¸­é€‰æ‹©ï¼ˆC\C++,JAVA,PHPâ€¦)å†™å‡ºä½ çš„æ€è·¯ï¼Œå°½é‡ä¼˜åŒ–ä½ çš„ç¨‹åºã€‚</h4>
<h4 id="phpçš„åƒåœ¾æ”¶é›†æœºåˆ¶æ˜¯æ€æ ·çš„">PHPçš„åƒåœ¾æ”¶é›†æœºåˆ¶æ˜¯æ€æ ·çš„</h4>
<h4 id="å†™ä¸€ä¸ªå‡½æ•°èƒ½å¤Ÿéå†ä¸€ä¸ªæ–‡ä»¶å¤¹ä¸‹çš„æ‰€æœ‰æ–‡ä»¶å’Œå­æ–‡ä»¶å¤¹">å†™ä¸€ä¸ªå‡½æ•°ï¼Œèƒ½å¤Ÿéå†ä¸€ä¸ªæ–‡ä»¶å¤¹ä¸‹çš„æ‰€æœ‰æ–‡ä»¶å’Œå­æ–‡ä»¶å¤¹</h4>
<h4 id="å†™å‡ºä¸€ä¸ªèƒ½å¤Ÿåˆ›å»ºå¤šçº§ç›®å½•çš„phpå‡½æ•°">å†™å‡ºä¸€ä¸ªèƒ½å¤Ÿåˆ›å»ºå¤šçº§ç›®å½•çš„PHPå‡½æ•°</h4>

<pre><code>
</code></pre>
<h4 id="è¯·å†™ä¸€æ®µphpä»£ç ç¡®ä¿å¤šä¸ªè¿›ç¨‹åŒæ—¶å†™å…¥åŒä¸€ä¸ªæ–‡ä»¶æˆåŠŸ">è¯·å†™ä¸€æ®µPHPä»£ç ï¼Œç¡®ä¿å¤šä¸ªè¿›ç¨‹åŒæ—¶å†™å…¥åŒä¸€ä¸ªæ–‡ä»¶æˆåŠŸ</h4>
<pre><code>$fp = fopen("lock.txt", "w+");//æœ¬åœ°æµ‹è¯•æ–‡ä»¶åŠ ä¸‹çš„txtæ–‡ä»¶ï¼Œä¸ºäº†æµ‹è¯•ï¼Œå¯ä»¥ä¸ºç©ºæˆ–è€…å†™å…¥ä¸€äº›ä¸œè¥¿
if (flock($fp, LOCK_EX)) { // è¿›è¡Œæ’å®ƒå‹é”å®š
    fwrite($fp, "Write something here\n");
    flock($fp, LOCK_UN); // é‡Šæ”¾é”å®š
    echo 123;
}
</code></pre>
<h4 id="æœ‰-ä¸€ç¾¤çŒ´å­æ’æˆä¸€åœˆæŒ‰12nä¾æ¬¡ç¼–å·ç„¶åä»ç¬¬1åªå¼€å§‹æ•°æ•°åˆ°ç¬¬måªæŠŠå®ƒè¸¢å‡ºåœˆä»å®ƒåé¢å†å¼€å§‹æ•°--å†æ•°åˆ°ç¬¬måªåœ¨æŠŠå®ƒè¸¢å‡ºå»å¦‚æ­¤ä¸åœçš„è¿›è¡Œä¸‹å»--ç›´åˆ°æœ€ååªå‰©ä¸‹ä¸€åªçŒ´å­ä¸ºæ­¢é‚£åªçŒ´å­å°±å«åšå¤§ç‹è¦æ±‚ç¼–ç¨‹æ¨¡æ‹Ÿæ­¤è¿‡ç¨‹è¾“å…¥mn-è¾“å‡ºæœ€åé‚£ä¸ªå¤§ç‹çš„ç¼–å·">æœ‰ ä¸€ç¾¤çŒ´å­æ’æˆä¸€åœˆï¼ŒæŒ‰1,2,â€¦,nä¾æ¬¡ç¼–å·ã€‚ç„¶åä»ç¬¬1åªå¼€å§‹æ•°ï¼Œæ•°åˆ°ç¬¬måª,æŠŠå®ƒè¸¢å‡ºåœˆï¼Œä»å®ƒåé¢å†å¼€å§‹æ•°ï¼Œ  å†æ•°åˆ°ç¬¬måªï¼Œåœ¨æŠŠå®ƒè¸¢å‡ºå»â€¦ï¼Œå¦‚æ­¤ä¸åœçš„è¿›è¡Œä¸‹å»ï¼Œ  ç›´åˆ°æœ€ååªå‰©ä¸‹ä¸€åªçŒ´å­ä¸ºæ­¢ï¼Œé‚£åªçŒ´å­å°±å«åšå¤§ç‹ã€‚è¦æ±‚ï¼šç¼–ç¨‹æ¨¡æ‹Ÿæ­¤è¿‡ç¨‹ï¼Œè¾“å…¥mã€n, è¾“å‡ºæœ€åé‚£ä¸ªå¤§ç‹çš„ç¼–å·ã€‚</h4>
<h4 id="ç”¨phpå®ç°ä¸€ä¸ªåŒå‘é˜Ÿåˆ—">ç”¨PHPå®ç°ä¸€ä¸ªåŒå‘é˜Ÿåˆ—</h4>
<h4 id="ä½¿å¯¹è±¡å¯ä»¥åƒæ•°ç»„ä¸€æ ·è¿›è¡Œforeachå¾ªç¯è¦æ±‚å±æ€§å¿…é¡»æ˜¯ç§æœ‰">ä½¿å¯¹è±¡å¯ä»¥åƒæ•°ç»„ä¸€æ ·è¿›è¡Œforeachå¾ªç¯ï¼Œè¦æ±‚å±æ€§å¿…é¡»æ˜¯ç§æœ‰ã€‚</h4>

<h4 id="è°ˆè°ˆä½ å¯¹å•ç‚¹ç™»å½•çš„ç†è§£æ¯”å¦‚åŸç†ä¸å®ç°ä»¥åŠå®ç°è¿‡ç¨‹ä¸­æœ‰å“ªäº›é—®é¢˜éœ€è¦æ³¨æ„">è°ˆè°ˆä½ å¯¹å•ç‚¹ç™»å½•çš„ç†è§£,æ¯”å¦‚åŸç†ä¸å®ç°,ä»¥åŠå®ç°è¿‡ç¨‹ä¸­æœ‰å“ªäº›é—®é¢˜éœ€è¦æ³¨æ„</h4>
<h4 id="å¯¹äºå¤§æµé‡çš„ç½‘ç«™æ‚¨é‡‡ç”¨ä»€ä¹ˆæ ·çš„æ–¹æ³•æ¥è§£å†³è®¿é—®é‡é—®é¢˜">å¯¹äºå¤§æµé‡çš„ç½‘ç«™,æ‚¨é‡‡ç”¨ä»€ä¹ˆæ ·çš„æ–¹æ³•æ¥è§£å†³è®¿é—®é‡é—®é¢˜?</h4>
<pre><code>1 æœ‰æ•ˆä½¿ç”¨ç¼“å­˜ï¼Œå¢åŠ ç¼“å­˜å‘½ä¸­ç‡
2 ä½¿ç”¨è´Ÿè½½å‡è¡¡
3 å¯¹é™æ€æ–‡ä»¶ä½¿ç”¨CDNè¿›è¡Œå­˜å‚¨å’ŒåŠ é€Ÿ
4 æƒ³æ³•å‡å°‘æ•°æ®åº“çš„ä½¿ç”¨
5 æŸ¥çœ‹å‡ºç°ç»Ÿè®¡çš„ç“¶é¢ˆåœ¨å“ªé‡Œ
</code></pre>
<h4 id="å†™å‡ºä¸€ç§æ’åºç®—æ³•è¦å†™å‡ºä»£ç å¹¶è¯´å‡ºä¼˜åŒ–å®ƒçš„æ–¹æ³•">å†™å‡ºä¸€ç§æ’åºç®—æ³•(è¦å†™å‡ºä»£ç ),å¹¶è¯´å‡ºä¼˜åŒ–å®ƒçš„æ–¹æ³•</h4>

<h1 id="å‚è€ƒ">å‚è€ƒ</h1>
<p><a href="https://github.com/php/php-langspec/tree/master/spec">php-langspec</a>
<a href="http://php.net/manual/zh/">PHPå®˜æ–¹æ‰‹å†Œ</a>
<a href="https://github.com/PizzaLiu/PHP-FIG">PHPç¼–ç è§„èŒƒ PHP-FIG PSRä¸­æ–‡ç‰ˆ</a></p>
:ET